// prisma/schema.prisma
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Credit {
    id           Int                 @id @default(autoincrement())
    userId       Int                 @unique
    balance      Float               @default(0)
    updatedAt    DateTime            @updatedAt
    createdAt    DateTime            @default(now())
    transactions CreditTransaction[] @relation("CreditTransactions")
}

model CreditTransaction {
    id        Int        @id @default(autoincrement())
    creditId  Int
    credit    Credit     @relation("CreditTransactions", fields: [creditId], references: [id])
    amount    Float
    type      CreditType // "CREDIT" | "DEBIT" | "REFUND"
    paymentId Int? // optional link to payment
    createdAt DateTime   @default(now())
}

enum CreditType {
    CREDIT
    DEBIT
    REFUND
}
